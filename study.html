<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Weekly Lesson Plan</title>
    <style>
        * {
            user-select: none;
        }
        body {
            font-family: 'Syne', sans-serif;
            background-color: #f0f0f0;
            margin: 0;
            padding: 0;
        }
        .planner {
            border-radius: 8px;
            padding: 20px;
        }
        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 20px;
        }
        .header {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-bottom: 20px;
        }
        .header input {
            width: 100%;
            padding: 5px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        .subjects {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 5px;
            margin-bottom: 10px;
        }
        .subject {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            border-radius: 4px;
            font-size: 24px;
            font-weight: bold;
        }
        .grid {
            display: grid;
            grid-template-columns: auto repeat(7, 1fr) auto;
            gap: 1px;
            border-radius: 10px;
        }
        .grid > div {
            background-color: white;
            padding: 10px;
            min-height: 80px;
            border-radius: 10px;
        }
        .day {
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
            writing-mode: vertical-rl;
            text-orientation: mixed;
            transform: rotate(180deg);
            background-color: #f9f9f9 !important;
        }
        .cell {
            border: 1px solid #eee;
            min-height: 80px;
        }
        .date-box {
            border-left: 1px solid #ddd;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
        }
        .materials {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 20px;
        }
        .material {
            border-radius: 4px;
            padding: 5px 10px;
            cursor: move;
            font-size: 14px;
            position: relative;
        }
        .material .delete-btn {
            display: none;
            position: absolute;
            top: -8px;
            right: -8px;
            background-color: red;
            color: white;
            border: none;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            font-size: 12px;
            cursor: pointer;
            line-height: 1;
        }
        .material:hover .delete-btn {
            display: block;
        }
        .cell.over {
            border: 2px dashed #000;
        }
    </style>
</head>
<body>
    <div class="planner">
        <h1>WEEKLY LESSON PLAN (First Secondary)</h1>
        <div class="materials">
            <div class="material" draggable="true" style="background-color: #ffeeba;">History</div>
            <div class="material" draggable="true" style="background-color: #d4edda;">Mathematics</div>
            <div class="material" draggable="true" style="background-color: #e2e3e5;">English</div>
            <div class="material" draggable="true" style="background-color: #cce5ff;">Integrated Sciences</div>
            <div class="material" draggable="true" style="background-color: #f8d7da;">Philosophy and Logic</div>
            <div class="material" draggable="true" style="background-color: #d1ecf1;">Arabic</div>
            <div class="material" draggable="true" style="background-color: #e9ecef;">German</div>
        </div>
        <div class="grid">
            <div class="day">H/Day</div>
            <div class="subject" style="background-color: #ffeeba;">02 &#8594; 03</div>
            <div class="subject" style="background-color: #d4edda;">03 &#8594; 04</div>
            <div class="subject" style="background-color: #e2e3e5;">04 &#8594; 05</div>
            <div class="subject" style="background-color: #cce5ff;">05 &#8594; 06</div>
            <div class="subject" style="background-color: #f8d7da;">06 &#8594; 07</div>
            <div class="subject" style="background-color: #d1ecf1;">07 &#8594; 08</div>
            <div class="subject" style="background-color: #e9ecef;">08 &#8594; 09</div>
            <br>
            <div class="day">SATURDAY</div>
            <div class="cell" data-day="saturday"></div>
            <div class="cell" data-day="saturday"></div>
            <div class="cell" data-day="saturday"></div>
            <div class="cell" data-day="saturday"></div>
            <div class="cell" data-day="saturday"></div>
            <div class="cell" data-day="saturday"></div>
            <div class="cell" data-day="saturday"></div>
            <br>
            <div class="day">SUNDAY</div>
            <div class="cell" data-day="sunday"></div>
            <div class="cell" data-day="sunday"></div>
            <div class="cell" data-day="sunday"></div>
            <div class="cell" data-day="sunday"></div>
            <div class="cell" data-day="sunday"></div>
            <div class="cell" data-day="sunday"></div>
            <div class="cell" data-day="sunday"></div>
            <br>
            <div class="day">MONDAY</div>
            <div class="cell" data-day="monday"></div>
            <div class="cell" data-day="monday"></div>
            <div class="cell" data-day="monday"></div>
            <div class="cell" data-day="monday"></div>
            <div class="cell" data-day="monday"></div>
            <div class="cell" data-day="monday"></div>
            <div class="cell" data-day="monday"></div>
            <br>
            <div class="day">TUESDAY</div>
            <div class="cell" data-day="tuesday"></div>
            <div class="cell" data-day="tuesday"></div>
            <div class="cell" data-day="tuesday"></div>
            <div class="cell" data-day="tuesday"></div>
            <div class="cell" data-day="tuesday"></div>
            <div class="cell" data-day="tuesday"></div>
            <div class="cell" data-day="tuesday"></div>
            <br>
            <div class="day">WEDNESDAY</div>
            <div class="cell" data-day="wednesday"></div>
            <div class="cell" data-day="wednesday"></div>
            <div class="cell" data-day="wednesday"></div>
            <div class="cell" data-day="wednesday"></div>
            <div class="cell" data-day="wednesday"></div>
            <div class="cell" data-day="wednesday"></div>
            <div class="cell" data-day="wednesday"></div>
            <br>
            <div class="day">THURSDAY</div>
            <div class="cell" data-day="thursday"></div>
            <div class="cell" data-day="thursday"></div>
            <div class="cell" data-day="thursday"></div>
            <div class="cell" data-day="thursday"></div>
            <div class="cell" data-day="thursday"></div>
            <div class="cell" data-day="thursday"></div>
            <div class="cell" data-day="thursday"></div>
            <br>
            <div class="day">FRIDAY</div>
            <div class="cell" data-day="friday"></div>
            <div class="cell" data-day="friday"></div>
            <div class="cell" data-day="friday"></div>
            <div class="cell" data-day="friday"></div>
            <div class="cell" data-day="friday"></div>
            <div class="cell" data-day="friday"></div>
            <div class="cell" data-day="friday"></div>
            <br>
        </div>
    </div>

    <script>
        const materials = document.querySelectorAll('.material');
        const cells = document.querySelectorAll('.cell');
        const headerInputs = document.querySelectorAll('.header input');
        const dateBoxes = document.querySelectorAll('.date-box');

        window.addEventListener('load', loadSavedData);

        materials.forEach(material => {
            material.addEventListener('dragstart', dragStart);
            material.addEventListener('dragend', dragEnd);
        });

        cells.forEach(cell => {
            cell.addEventListener('dragover', dragOver);
            cell.addEventListener('dragenter', dragEnter);
            cell.addEventListener('dragleave', dragLeave);
            cell.addEventListener('drop', drop);
        });

        headerInputs.forEach(input => {
            input.addEventListener('input', saveData);
        });

        dateBoxes.forEach(box => {
            box.addEventListener('input', saveData);
        });

        function dragStart(e) {
            e.dataTransfer.setData('text/plain', this.textContent);
            e.dataTransfer.setData('text/html', this.outerHTML);
        }

        function dragEnd() {
            this.style.opacity = '1';
            saveData();
        }

        function dragOver(e) {
            e.preventDefault();
        }

        function dragEnter(e) {
            e.preventDefault();
            this.classList.add('over');
        }

        function dragLeave() {
            this.classList.remove('over');
        }

        function drop(e) {
            e.preventDefault();
            const html = e.dataTransfer.getData('text/html');
            const newMaterial = createMaterialElement(html);
            this.appendChild(newMaterial);
            this.classList.remove('over');
            saveData();
        }

        function createMaterialElement(html) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = html;
            const newMaterial = tempDiv.firstChild;
            
            const deleteBtn = document.createElement('button');
            deleteBtn.textContent = 'Ã—';
            deleteBtn.classList.add('delete-btn');
            deleteBtn.addEventListener('click', function() {
                newMaterial.remove();
                saveData();
            });
            newMaterial.appendChild(deleteBtn);

            newMaterial.addEventListener('dragstart', dragStart);
            newMaterial.addEventListener('dragend', dragEnd);

            return newMaterial;
        }

        function saveData() {
            const plannerData = {
                headerInputs: Array.from(headerInputs).map(input => input.value),
                cells: Array.from(cells).map(cell => cell.innerHTML),
                dateBoxes: Array.from(dateBoxes).map(box => box.textContent)
            };
            localStorage.setItem('weeklyPlannerData', JSON.stringify(plannerData));
        }

        function loadSavedData() {
            const savedData = localStorage.getItem('weeklyPlannerData');
            if (savedData) {
                const plannerData = JSON.parse(savedData);
                
                headerInputs.forEach((input, index) => {
                    input.value = plannerData.headerInputs[index] || '';
                });

                cells.forEach((cell, index) => {
                    cell.innerHTML = plannerData.cells[index] || '';
                    cell.querySelectorAll('.material').forEach(material => {
                        material.addEventListener('dragstart', dragStart);
                        material.addEventListener('dragend', dragEnd);
                        material.querySelector('.delete-btn').addEventListener('click', function() {
                            material.remove();
                            saveData();
                        });
                    });
                });

                dateBoxes.forEach((box, index) => {
                    box.textContent = plannerData.dateBoxes[index] || '';
                });
            }
        }
    </script>
</body>
</html>